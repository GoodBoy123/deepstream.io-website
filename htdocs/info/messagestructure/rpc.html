<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>deepstream.io | A Scalable Server for Realtime Web Apps</title>

	

	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="deepstream, deepstream.io, streaming, realtime, server, socket" />
	<meta name="description" content="A node.js realtime server, supporting data-sync, RPCs, events and WebRTC" />
	<meta name="author" content="Wolfram Hempel" />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="../../assets/css/navigation.css" />
	<link rel="stylesheet" type="text/css" href="../../assets/css/screen.css" />
	<link rel="stylesheet" type="text/css" href="../../assets/css/api.css" />
	<script type="text/javascript">
	document.createElement( 'header' );
	document.createElement( 'nav' );
	</script>
	<script type="text/javascript" src="../../assets/js/jquery.js"></script>
	<script type="text/javascript" src="../../assets/js/menu.js"></script>
	<script type="text/javascript" src="../../assets/js/prism.js"></script>

	<link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Quicksand:300,400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="../../assets/css/prism.css" />
</head>

<body class="category_info ">
	<div class="mobile-menu">
		<div class="nav mobile-nav">
			<ul>
				<li ><a href="../..">Home</a></li>
				<li ><a href="../../download/">Downloads</a></li>
				<li ><a href="../../tutorials/getting-started.html">Tutorials</a></li>
				<li ><a href="../../docs/deepstream.html">Documentation</a></li>
				<li ><a href="../../blog/">Blog</a></li>
				<li class="active"><a href="../../info/">Info</a></li>
			</ul>		</div>
	</div>

	<div id="outer-wrapper">
		<div id="header" class="compact-header">
			<div class="header-tiny-logo">
				<h1><a href="../..">deepstream.io - a scalable server for realtime web apps</a></h1>
			</div>
			<div class="nav desktop-nav">
				<ul>
					<li ><a href="../..">Home</a></li>
					<li ><a href="../../download/">Downloads</a></li>
					<li ><a href="../../tutorials/getting-started.html">Tutorials</a></li>
					<li ><a href="../../docs/deepstream.html">Documentation</a></li>
					<li ><a href="../../blog/">Blog</a></li>
					<li class="active"><a href="../../info/">Info</a></li>
				</ul>			</div>
			<span class="menu-button menu-icon">
				<i class="fa fa-bars"></i>
			</span>
		</div>
		<div id="wrapper" class="main">
			<ul id="subnav">
	<li class="head first">Performance</li>
	<li >
		<a href="../../info/performance-overview.html">Overview</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>	
	<li >
		<a href="../../info/performance-single-node-vs-cluster.html">Single Node vs Cluster</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>

	<li class="head first">Message Specification</li>
	<li >
		<a href="../../info/messagestructure/index.html">Overview</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>	
	
		<li >
			<a href="../../info/messagestructure/connectivity.html">
			connectivity Features</a>
			<div class="isActiveIndicator orangeGradient"></div>
		</li>
		<li >
			<a href="../../info/messagestructure/parsing.html">
			parsing Features</a>
			<div class="isActiveIndicator orangeGradient"></div>
		</li>
		<li class="active">
			<a href="../../info/messagestructure/rpc.html">
			rpc Features</a>
			<div class="isActiveIndicator orangeGradient"></div>
				<ul class="overview">
					<li><a href="#RPC Connectivity">RPC Connectivity</a></li>
					<li><a href="#Providing RPC">Providing RPC</a></li>
					<li><a href="#Making RPCS">Making RPCS</a></li>
					<li><a href="#RPC Timeouts">RPC Timeouts</a></li>
				</ul>
		</li>
		<li >
			<a href="../../info/messagestructure/records.html">
			records Features</a>
			<div class="isActiveIndicator orangeGradient"></div>
		</li>
		<li >
			<a href="../../info/messagestructure/events.html">
			events Features</a>
			<div class="isActiveIndicator orangeGradient"></div>
		</li>
	
	<li >
		<a href="../../info/messagestructure/specs.html">Detailed Specs</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>

</ul>

			<div id="content">
				<h1>
    RPC
</h1>

<link rel="stylesheet" type="text/css" href="../../assets/css/gherkin-highlight.css" />
<link rel="stylesheet" type="text/css" href="../../assets/css/messagestructure.css" />
<script type="text/javascript" src="../../assets/js/messagestructure.js"></script>

<div class="message-in-depth">
     <table>
        <tbody>
            <tr>
                <td>Event</td>
                <td class="event"> C.BLA.BLA </td>
            </tr>
            <tr>
                <td>Action</td>
                <td class="action"> C.BLA.BLA </td>
            </tr>
            <tr>
                <td>Data</td>
                <td class="data">['dljnnjvj','dcdjnkjnvfjkvn']</td>
            </tr>
            <tr>
                <td>Message Spec</td>
                <td class="messageSpec">

<span class="message-format"><span class="message-format-part-0">E</span><span class="message-format-pipe">|</span><span class="message-format-part-1">EVT</span><span class="message-format-pipe">|</span><span class="message-format-part-2">eventName</span><span class="message-format-pipe">|</span><span class="message-format-part-3">JSON</span><span class="message-format-end">+</span></span>

                </td>
            </tr>
        </tbody>
    </table>
    <div class="down-arrow"></div>
</div>
    <div class="section">  
        <a name="RPC Connectivity"></a>
        <pre><code class="language-gherkin">@rpc
Feature: RPC Connectivity

Scenario: The client is connected
	Given the test server is ready
		And the client is initialised
		And the client logs in with username XXX and password YYY
		And the server sends the message A|A+

# Providing

Scenario: The client provides a RPC
	When the client provides a RPC called toUppercase
	Then the last message the server recieved is P|S|toUppercase+

Scenario: The client gets an ACK
 	When the server sends the message P|A|S|toUppercase+

Scenario: The client loses it connection to the server
	When the connection to the server is lost
	Given some time passes
	Then the clients connection state is RECONNECTING
	
Scenario: The client reconnects to the server
	When the connection to the server is reestablished
	Then the clients connection state is AUTHENTICATING

Scenario: The client is connected
	Given the client logs in with username XXX and password YYY
		And the server sends the message A|A+
	Then the clients connection state is OPEN

Scenario: The client resends the rpc provider
	Then the server received the message P|S|toUppercase+</code></pre>
    </div>
    <div class="section">  
        <a name="Providing RPC"></a>
        <pre><code class="language-gherkin">@rpc
Feature: Providing RPC
	Remote Procedure Calls are deepstream&#x27;s concept of request-response communication. This requires
	a client that makes the RPC (requestor or receiver) and another client that answers it (provider)

Scenario: The client is connected
	Given the test server is ready
		And the client is initialised
		And the client logs in with username XXX and password YYY
		And the server sends the message A|A+

# Providing

Scenario: The client provides a RPC
	When the client provides a RPC called toUppercase
	Then the last message the server recieved is P|S|toUppercase+

Scenario: The client gets an ACK
 	When the server sends the message P|A|S|toUppercase+

# Success

Scenario: The client gets a supported request
 	When the server sends the message P|REQ|toUppercase|&lt;UID&gt;|Sabc+

Scenario: The client responds with an ack and processes message
	Then the last message the server recieved is P|A|toUppercase|&lt;UID&gt;+
 		And the client recieves a request for a RPC called toUppercase with data abc

Scenario: The client responds with a success
	When the client responds to the RPC toUppercase with data ABC
 	Then the last message the server recieved is P|RES|toUppercase|&lt;UID&gt;|SABC+

# Error

Scenario: The client gets a supported request
 	When the server sends the message P|REQ|toUppercase|&lt;UID&gt;|Sabc+

Scenario: The client responds with an ack and processes message
	Then the last message the server recieved is P|A|toUppercase|&lt;UID&gt;+
 		And the client recieves a request for a RPC called toUppercase with data abc

Scenario: The client responds with an error
	When the client responds to the RPC toUppercase with the error &quot;An Error Occured&quot;
 	Then the last message the server recieved is P|E|An Error Occured|toUppercase|&lt;UID&gt;+

# Rejection when supported

Scenario: The client gets a supported request
 	When the server sends the message P|REQ|toUppercase|&lt;UID&gt;|Sabc+

Scenario: The client responds with an ack and processes message
	Then the last message the server recieved is P|A|toUppercase|&lt;UID&gt;+
 		And the client recieves a request for a RPC called toUppercase with data abc

Scenario: The client responds with an error
	When the client rejects the RPC toUppercase
 	Then the last message the server recieved is P|REJ|toUppercase|&lt;UID&gt;+

# Rejection when not supported

Scenario: The client gets an unsupported request
	When the server sends the message P|REQ|unSupported|&lt;UID&gt;|Sabc+

Scenario: The client responds a reject
	Then the last message the server recieved is P|REJ|unSupported|&lt;UID&gt;+

# Unproviding

Scenario: The client stops providing a RPC
	When the client stops providing a RPC called toUppercase
	Then the last message the server recieved is P|US|toUppercase+

Scenario: The client gets an ACK
 	When the server sends the message P|A|US|toUppercase+
	</code></pre>
    </div>
    <div class="section">  
        <a name="Making RPCS"></a>
        <pre><code class="language-gherkin">@rpc
Feature: Making RPCS
	Remote Procedure Calls are deepstream&#x27;s concept of request-response communication. This requires
	a client that makes the RPC (requestor or receiver) and another client that answers it (provider)

Scenario: The client is connected
	Given the test server is ready
		And the client is initialised
		And the client logs in with username XXX and password YYY
		And the server sends the message A|A+

# Success 

Scenario: The client makes an RPC
	When the client requests RPC toUppercase with data abc
	Then the last message the server recieved is P|REQ|toUppercase|&lt;UID&gt;|Sabc+

Scenario: The client gets an ACK
	When the server sends the message P|A|REQ|&lt;UID&gt;+

Scenario: The client receives a succesful response
	When the server sends the message P|RES|toUppercase|&lt;UID&gt;|SABC+
	Then the client recieves a successful RPC callback for toUppercase with data ABC

# Error

Scenario: The client makes an RPC
	When the client requests RPC toUppercase with data abc
	Then the last message the server recieved is P|REQ|toUppercase|&lt;UID&gt;|Sabc+

Scenario: The client gets an ACK
	When the server sends the message P|A|REQ|&lt;UID&gt;+

Scenario: The client receives an error response
	When the server sends the message P|E|RPC Error Message|toUppercase|&lt;UID&gt;+
	Then the client recieves an error RPC callback for toUppercase with the message &quot;RPC Error Message&quot;
	</code></pre>
    </div>
    <div class="section">  
        <a name="RPC Timeouts"></a>
        <pre><code class="language-gherkin">@rpc
Feature: RPC Timeouts
	Remote Procedure Calls are deepstream&#x27;s concept of request-response communication. This requires
	a client that makes the RPC (requestor or receiver) and another client that answers it (provider)

Scenario: The client is connected
	Given the test server is ready
		And the client is initialised
		And the client logs in with username XXX and password YYY
		And the server sends the message A|A+

# Making

Scenario: The client makes an RPC
	When the client requests RPC toUppercase with data abc
	Then the last message the server recieved is P|REQ|toUppercase|&lt;UID&gt;|Sabc+

Scenario: The client receives a timeout
	When some time passes
	Then the client recieves an error RPC callback for toUppercase with the message &quot;RESPONSE_TIMEOUT&quot;

# Providing

Scenario: The client provides a RPC
	When the client provides a RPC called toUppercase
	Then the last message the server recieved is P|S|toUppercase+

@timeout
Scenario: The server does not respond in time with an ACK
	When some time passes
	Then the client throws a ACK_TIMEOUT error with message No ACK message received in time for toUppercase

# Unproviding

Scenario: The client stops providing a RPC
	When the client stops providing a RPC called toUppercase
	Then the last message the server recieved is P|US|toUppercase+

@timeout
Scenario: The server does not respond in time with an ACK
	When some time passes
	Then the client throws a ACK_TIMEOUT error with message No ACK message received in time for toUppercase
	</code></pre>
    </div>

			</div>
		</div>
		<script type="text/javascript" src="../../assets/js/docs.js"></script>
	</div>
	<div id="footer">
		<ul class="footer-items">

			<li class="footer-right">
				<ul class="social">
					<li class="twitter">
						<a href="https://twitter.com/deepstreamIO">
							<i class="fa fa-twitter"></i>  Twitter
						</a>
					</li>
					<li class="github">
						<a href="https://github.com/hoxton-one">
							<i class="fa fa-github"></i>  Github
						</a>
					</li>
					<li class="stack-overflow">
						<a href="http://stackoverflow.com/questions/tagged/deepstream.io">
							<i class="fa fa-stack-overflow"></i>  Stack Overflow
						</a>
					</li>
					<li>
						<a href="https://deepstream-slack.herokuapp.com/">
							<i class="fa fa-slack"></i>  Slack
						</a>
					</li>
				</ul>
			</li>

			<li class="footer-middle">
				<h4>Browse</h4>
				<ul>
					<li ><a href="../..">Home</a></li>
					<li ><a href="../../download/">Downloads</a></li>
					<li ><a href="../../tutorials/getting-started.html">Tutorials</a></li>
					<li ><a href="../../docs/deepstream.html">Documentation</a></li>
					<li ><a href="../../blog/">Blog</a></li>
					<li class="active"><a href="../../info/">Info</a></li>
				</ul>			</li>

			<li class="footer-left">
				<h4>Contact us</h4>
				<p>
					<b>deepstream.io </b>is developed by Hoxton One Ltd. <br>
				</p>
				<p>
					Email us <a href="mailto:info@deepstream.io">info@deepstream.io</a>.<br><br>
				</p>

				<h4>Star this project on github!</h4>
				<p>
					<a class="github-button" href="https://github.com/hoxton-one/deepstream.io" data-icon="octicon-star" data-style="mega" data-count-href="/hoxton-one/deepstream.io/stargazers" data-count-api="/repos/hoxton-one/deepstream.io#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star hoxton-one/deepstream.io on GitHub">Star</a>
				</p>
			</li>

		</ul>
	</div>


	<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
</body>
</html>
